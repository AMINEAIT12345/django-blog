{% extends 'blog/base.html' %}

{% block title %}{{ post.title }}{% endblock %}

{% block content %}

<h1>{{ post.title }}</h1>

<p class="text-muted">
    Published on {{ post.created_at|date:"M d, Y" }}
</p>

<hr>

<p>{{ post.content }}</p>

<hr class="mt-5">

<h3>Comments</h3>

{% if comments %}
{% for comment in comments %}
<div class="card mb-2 shadow-sm">
    <div class="card-body">
        <strong>{{ comment.user.username }}</strong>
        <small class="text-muted">
            {{ comment.created_at|date:"M d, Y H:i" }}
        </small>
        <p class="mt-2 mb-0">{{ comment.content }}</p>
    </div>
</div>
{% endfor %}
{% else %}
<p class="text-muted">No comments yet.</p>
{% endif %}

<hr class="mt-4">

{% if user.is_authenticated %}
<h4>Add a Comment</h4>
<form method="POST">
    {% csrf_token %}
    <div class="mb-3">
        {{ form.content }}
    </div>
    <button type="submit" class="btn btn-primary">
        Post Comment
    </button>
</form>
{% else %}
<p>
    <a href="{% url 'login' %}">Login</a> to write a comment.
</p>
{% endif %}

<a href="{% url 'blog:home' %}" class="btn btn-secondary mt-4">
    Back to home
</a>

{% endblock %}